<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Iniciar Sesión</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body class="auth-body">
    <div class="auth-box">
        <h2>Iniciar Sesión</h2>
        <input type="text" id="loginUser" placeholder="Nombre" />
        <input type="password" id="loginPass" placeholder="Contraseña" />
        <button id="loginBtn">Entrar</button>
        <a href="register.html">Crear cuenta</a>
    </div>

<script>
document.getElementById('loginBtn').addEventListener('click', () => {
    const u = document.getElementById("loginUser").value;
    const p = document.getElementById("loginPass").value;
    if (!u || !p) return alert("Completa todos los campos");

    fetch('/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username: u, password: p })
    }).then(res => res.json())
      .then(data => {
          if (data.success) {
              localStorage.setItem('loggedUser', u);
              localStorage.setItem('isAdmin', data.admin);
              window.location.href = 'index.html';
          } else {
              alert(data.msg);
          }
      });
});
</script>
</body>
</html>
